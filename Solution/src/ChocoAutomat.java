//
//
//  Generated by StarUML(tm) Java Add-In
//
//  @ Project : Untitled
//  @ File Name : ChocoAutomat.java
//  @ Date : 2019.03.20.
//  @ Author : 
//
//


import javax.imageio.ImageIO;
import java.io.IOException;
import java.util.concurrent.ThreadLocalRandom;

/**
 * A csokiautomatat megvalosito osztaly.
 *
 * @author Cynolter
 */
public class ChocoAutomat extends Item {

    /**
     * A countDown fuggveny csokkenti a Counter attributumat az osztalynak, amint az eleri a 0-t,
     * akkor sipol és reszetelodik a Counter.
     */
    @Override
    public void countDown() {
        //GameLogic.indent(true);
        //System.out.println(">   ChocoAutomat::countDown()");
        int rn;

        --Counter;
        if (Counter <= 0) {
            doAction();

            if (ProtoMenu.isRandom()) {
                rn = ThreadLocalRandom.current().nextInt(75, 125 + 1);
            } else {
                rn = 75;
            }

            Counter = rn;
        }
        //GameLogic.indent(false);
        //System.out.println("<   ChocoAutomat::countDown()");
        return;
    }

    /**
     * A protomenuhoz szukseges extra metodus, amelynek segitsevel, el tudjuk erni, hogy
     * akkor, amikor akarjuk tudjon sipolni
     */
    @Override
    public void doAction() {
        for (BaseTile tile : onTile.getNeighbours()) {
            if (tile.localAnimal != null) {
                tile.beep();
            }
        }
    }

    /**
     * A konstruktor, amelyikben meg kell adni, melyik csempere kerul az automata,
     * és kezdoallapotba allitjuk a Counter attributumot.
     *
     * @param t A csempe amelyiken a Csokiautomata all.
     */
    public ChocoAutomat(Tile t) {
        try {
            image = ImageIO.read(getClass().getResource( "images/automat.png"));
        } catch (IOException e) {
            e.printStackTrace();
        }

        //GameLogic.indent(true);
        //System.out.println(">   ChocoAutomat::ChocoAutomat(Tile t)");
        onTile = t;
        int rn = ThreadLocalRandom.current().nextInt(75,125+1);
        Counter = rn;
        //Counter = 1;
        //GameLogic.indent(false);
        //System.out.println("<   ChocoAutomat::ChocoAutomat(Tile t)");
    }

    /**
     * Az item tipusanak lekerdezese.
     *
     * @return Az item tipusa.
     */
    @Override
    public String getType() {
        return "chocoautomat";
    }
}
